<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine?</title>

<style>
body {
    font-family: "Courier New", monospace;
    background: #ffe6f2;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    cursor: pointer;
}

.container {
    text-align: center;
    position: relative;
}

h1 {
    color: #ff1493;
}

button {
    font-family: "Courier New", monospace;
    padding: 12px 25px;
    font-size: 1.2em;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}

#yes {
    background: #ff69b4;
    color: white;
    box-shadow: 0 0 15px rgba(255,105,180,0.8);
}

#no {
    background: #ccc;
    position: absolute;
    top: 50px;
    left: 50px;
}

.tantrum {
    margin-top: 15px;
    color: #ff1493;
    font-size: 1.1em;
}
.shake {
    animation: shake 0.3s infinite;
}
@keyframes shake {
    0% { transform: translate(0); }
    25% { transform: translate(-4px, 4px); }
    50% { transform: translate(4px, -4px); }
    75% { transform: translate(-4px, -4px); }
}
.wiggle {
    animation: wiggle 0.3s infinite;
}
@keyframes wiggle {
    0% { transform: translateX(0); }
    25% { transform: translateX(-4px); }
    50% { transform: translateX(4px); }
    75% { transform: translateX(-4px); }
    100% { transform: translateX(0); }
}

.heart {
    position: fixed;
    pointer-events: none;
}
</style>
</head>

<body>
<div class="container">
    <h1>Will you be my Valentine? ðŸ’–</h1>

    <button id="yes">YES</button>
    <button id="no">NO</button>

    <div class="tantrum" id="tantrum"></div>
</div>

<script>
const noBtn = document.getElementById("no");
const yesBtn = document.getElementById("yes");
const tantrum = document.getElementById("tantrum");

const tantrums = ["Really?", "Are you sure?", "Why? :(", "Please baby ðŸ˜­"];
let noClicks = 0;
let yesScale = 1;

// Keep NO button inside viewport
function clamp(value, min, max){
    return Math.min(Math.max(value,min), max);
}

let prevX = 50, prevY = 50; // initial NO button pos

// NO button slow escape + pullback + wiggle
noBtn.addEventListener("mousemove", e=>{
    const rect = noBtn.getBoundingClientRect();
    const btnX = rect.left + rect.width/2;
    const btnY = rect.top + rect.height/2;

    const dx = e.clientX - btnX;
    const dy = e.clientY - btnY;
    const distance = Math.sqrt(dx*dx + dy*dy);

    let speed = 0.1; // slow escape factor
    let pull = 0.02; // small pull back toward cursor

    let moveX = -dx*speed + dx*pull;
    let moveY = -dy*speed + dy*pull;

    // new position
    let newLeft = clamp(rect.left + moveX, 10, window.innerWidth - rect.width - 10);
    let newTop = clamp(rect.top + moveY, 10, window.innerHeight - rect.height - 10);

    noBtn.style.left = newLeft + "px";
    noBtn.style.top = newTop + "px";

    // wiggle
    noBtn.classList.add("wiggle");
});

noBtn.addEventListener("mouseleave", ()=>{
    noBtn.classList.remove("wiggle");
});

// NO button clicked
noBtn.addEventListener("click", ()=>{
    noClicks++;
    tantrum.textContent = tantrums[Math.min(noClicks-1, tantrums.length-1)];
    tantrum.classList.add("shake");
    tantrum.style.animationDuration = Math.max(0.05,0.3-noClicks*0.05)+"s";

    // YES button grows
    yesScale += 0.2;
    yesBtn.style.transform = `scale(${yesScale})`;
    yesBtn.style.boxShadow = `0 0 ${20 + noClicks*10}px hotpink`;
});

// YES button click
yesBtn.addEventListener("click", ()=>{
    for(let i=0;i<30;i++){
        const h = document.createElement("div");
        h.textContent="ðŸ’–";
        h.className="heart";
        h.style.left = yesBtn.getBoundingClientRect().left + "px";
        h.style.top = yesBtn.getBoundingClientRect().top + "px";

        const x = (Math.random()-0.5)*400;
        const y = (Math.random()-0.5)*400;

        h.animate([
            {transform:"translate(0,0)", opacity:1},
            {transform:`translate(${x}px,${y}px)`, opacity:0}
        ], {duration:900});

        document.body.appendChild(h);
        setTimeout(()=>h.remove(),900);
    }

    setTimeout(()=>{ window.location.href="letter.html"; },700);
});

// click hearts
document.addEventListener("click", e=>{
    const h=document.createElement("div");
    h.textContent="ðŸ’—";
    h.className="heart";
    h.style.left=e.clientX+"px";
    h.style.top=e.clientY+"px";
    document.body.appendChild(h);
    h.animate([{opacity:1},{opacity:0}],{duration:800});
    setTimeout(()=>h.remove(),800);
});
</script>
</body>
</html>
